<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="eng" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"><!-- InstanceBegin template="/Templates/new_template_leftmenu.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="author" content="Net-Project Team"/>
    <meta http-equiv="Content-Language" content="en-GB"/>
    <meta http-equiv="Window-target" content="_top"/>
    <meta name="no-email-collection" content="http://www.unspam.com/noemailcollection/"/>

    <title>The BioInvestigationIndex (BII)</title>

    <link rel="stylesheet" href="http://www.ebi.ac.uk/inc/css/contents.css" type="text/css"/>
    <link rel="stylesheet" href="http://www.ebi.ac.uk/inc/css/sidebars.css" type="text/css"/>
    <link rel="SHORTCUT ICON" href="img/favicon.ico"/>
    <link rel="stylesheet" href="http://www.ebi.ac.uk/inc/css/template.css" type="text/css"/>
    <link href="stylesheet/theme.css" rel="stylesheet" type="text/css"/>
    <link href="stylesheet/global.css" rel="stylesheet" type="text/css"/>
    <link type='text/css' href='stylesheet/modal_dialog.css' rel='stylesheet' media='screen'/>


    <script type="text/javascript" src="http://www.ebi.ac.uk/inc/js/iconboxslider.js"></script>
    <script type="text/javascript" src="http://www.ebi.ac.uk/inc/js/newmenu.js"></script>
    <script type="text/javascript" src="http://www.ebi.ac.uk/inc/js/functions.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type='text/javascript' src='js/jquery.simplemodal.js'></script>
    <script type='text/javascript' src='js/basic.js'></script>


    <script type="text/javascript">
        //<![CDATA[
        if ((navigator.userAgent.indexOf("Windows") != -1) || ( (navigator.userAgent.indexOf("Safari") != -1)  )) {
            document.write('<link rel="stylesheet" href="http://www.ebi.ac.uk/inc/css/windows_safari.css" type="text/css" />');
            document.write('<link type="text/css" href="stylesheet/modal_dialog_ie.css" rel="stylesheet"/>');
        }
        //]]>

    </script>


    <style type="text/css">
        @media print {
            body, .headerdiv, .contentsarea, head {
                position: relative;
            }
        }

        html {
            overflow-y: scroll;
            overflow-x: auto;
        }
    </style>

</head>
<body onload="if(navigator.userAgent.indexOf('MSIE') != -1) {document.getElementById('head').allowTransparency = true;}">
<div class="headerdiv" id="headerdiv" style="position:absolute; z-index: 1;">
    <iframe src="http://www.ebi.ac.uk/inc/head.html" name="head" id="head" frameborder="0" marginwidth="0px"
            marginheight="0px" scrolling="no" width="100%"
            style="position:absolute; z-index: 1; height: 57px;">Your browser does not support inline frames or is currently configured not to display inline frames. Content can be viewed at actual source page: http://www.ebi.ac.uk/inc/head.html
    </iframe>
</div>

<!-- Change to use modal dialog -->
<div id="basic-modal-content">

<a4j:outputPanel id="info_panel">

    <div id="info_container_ebi_deploy">

        <a4j:outputPanel rendered="#{not identity.loggedIn}">

            <div id="info_highlight"><!-- --></div>
            <!-- <div id="etc_secret">Shhh. We have a secret. We'll let you know when it's ready. Promise.</div><hr /> -->
            <h3 id="info_title">Login</h3>

            <div id="info_section">
                <a4j:form styleClass="form" id="loginForm" ajaxSubmit="true">
                    <div id="loginFields">
                        <p>
                            <label class="loginLabel">Username</label>
				<span class="w">
					<h:inputText tabindex="1"
                                 styleClass="validate[required,custom[noSpecialCaracters],length[0,20]] input"
                                 id="name" value="#{identity.username}"/>
				</span>
                        </p>

                        <p>
                            <label class="loginLabel">Password</label>
				<span class="w">
					<h:inputSecret tabindex="2" styleClass="input" id="password" value="#{identity.password}"/>
				</span>
                        </p>

                    </div>


                    <a4j:commandButton id="login" value="login"
                                       action="#{identity.login}"
                                       styleClass="login_button"
                                       reRender="loginForm,info_panel"
                                       image="img/new_login/login_button.png"/>


                    <h:panelGroup styleClass="messages-panel-white">
                        <h:messages id="messages" showDetail="false" showSummary="true" layout="table"
                                    globalOnly="true"/>
                    </h:panelGroup>

                </a4j:form>
            </div>

            <a4j:form id="registration" styleClass="form">

                <div id="info_register_ebi">
                    <h3>register</h3>

                    <p>
                        <label class="registerLabel">Forename *</label>
          <span class="w" id="foreNamePanel">
          <h:inputText tabindex="3" styleClass="input" id="forename" value="#{user.firstName}"
                       required="true" maxlength="25">
              <a4j:support id="foreNameRenderer" event="onblur"
                           reRender="foreNamePanel,errorPanel"
                           ajaxSingle="true"/>
          </h:inputText>

          </span></p>

                    <p>
                        <label class="registerLabel">Surname *</label>
          <span class="w" id="lastNamePanel">
          <h:inputText tabindex="4" styleClass="input" id="surname" value="#{user.lastName}"
                       required="true" maxlength="25">

              <a4j:support id="lastNameRenderer" event="onblur"
                           reRender="lastNamePanel, errorPanel"
                           ajaxSingle="true"/>
          </h:inputText>
          </span></p>

                    <p>

                        <label class="registerLabel">Email *</label>
                <span class="w" id="emailPanel">
                    <h:inputText tabindex="7" styleClass="input" id="email" value="#{user.email}"
                                 required="true">
                        <a4j:support id="emailRenderer" event="onblur"
                                     reRender="emailPanel, errorPanel"
                                     ajaxSingle="true"/>
                    </h:inputText>
                </span>
                    </p>

                </div>

                <div id="info_register_2_ebi">
                    <p>
                        <label class="registerLabel">Desired Username *</label>
          <span class="w" id="usernamePanel">
          <h:inputText tabindex="8" styleClass="input" id="username" value="#{user.userName}"
                       required="true" maxlength="25">

              <a4j:support id="usernameRenderer" event="onblur"
                           reRender="usernamePanel, errorPanel"
                           ajaxSingle="true"/>

          </h:inputText>
          </span></p>

                    <p>
                        <label class="registerLabel">Password *</label>
          <span class="w" id="passwordPanel">
          <h:inputSecret tabindex="9" styleClass="input" id="password" value="#{user.password}"
                         required="true" maxlength="25">

              <a4j:support id="passwordRenderer" event="onblur"
                           reRender="passwordPanel, errorPanel"
                           ajaxSingle="true"/>
          </h:inputSecret>
          </span></p>

                    <p>
                        <label class="registerLabel">Confirm Password *</label>
          <span class="w">
          <h:inputSecret tabindex="10" styleClass="input" id="confirmPassword" value="#{register.verify}"
                         required="true" maxlength="15"/>
          </span></p>


                </div>

                <div id="info_done_ebi">
                    <h3>done</h3>

                    <p align="right">
                        <a4j:commandButton id="register" value="Register"
                                           action="#{register.register}" styleClass="search_button"

                                           reRender="registration, informationPanel"
                                           image="img/new_login/register_button.png"/>
                    </p>

                    <p>
                        <a4j:outputPanel id="errorPanel" styleClass="messages-panel_ebi_deploy" ajaxRendered="true"
                                         rendered="#{not register.registered}">

                            <a4j:outputPanel rendered="#{register.hasErrors()}">
                                <img src="img/new_login/problems_found.png" alt="problems" style="border:none"/>
                                <h:messages id="messages" styleClass="message" showDetail="false" showSummary="true"
                                            layout="list"/>
                            </a4j:outputPanel>

                        </a4j:outputPanel>

                        <a4j:outputPanel id="welcomePanel" styleClass="info" ajaxRendered="true"
                                         rendered="#{register.registered}">

                            <div align="center">
                                <img src="img/login/welcome.png" alt="welcome" align="right"/> <br/>
                                user #{user.userName} has been registered"
                            </div>

                        </a4j:outputPanel>
                    </p>

                </div>
            </a4j:form>

        </a4j:outputPanel>

        <a4j:outputPanel rendered="#{identity.loggedIn}">

            <div id="logged_in_section"></div>

            <div id="info_logged_in" align="left">
                <p>welcome <span class="username-text">#{identity.username}</span></p>

                <p>you are logged in to the <span class="username-text">BII web application</span>.
                    you can now view all of the public studies and any private studies which you have been assigned access to!
                </p>
            </div>

            <div id="close_button_ebi">
                <s:link id="close" action="javascript:history.get(0)">
                    <img src="img/new_login/close_button.png" style="border:none" alt="close here"/>
                </s:link>
            </div>

            <div id="logout_button_ebi">
                <s:link id="logout" action="#{identity.logout}">
                    <img src="img/new_login/logout_button.png" style="border:none" alt="logout here"/>
                </s:link>
            </div>

        </a4j:outputPanel>
    </div>
</a4j:outputPanel>

<div style='display:none'>
    <img src='img/new_login/x.png' alt=''/>
</div>

</div>


<div align="right" class="login_button_section" style="height:40px">
    <div class="basic" id="info_btn_ebi_deploy"></div>
</div>


<div class="bii-content" id="bii-contents-ebi-deploy">
<table class="contentspane" id="contentspane" summary="The main content pane of the page">
    <tr>
        <td class="leftmargin"><img src="http://www.ebi.ac.uk/inc/images/spacer.gif" class="spacer" alt="spacer"/>
        </td>
        <td class="leftmenucell" id="leftmenucell">
            <div class="leftmenu" id="leftmenu"
                 style="width: 145px; visibility: visible; display: block; overflow: hidden;">

                <div>
                    <img src="img/bii_logo_and_menu.png" alt="BII Logo" border="0" usemap="#menu_map"/>
                    <br/>
                </div>


                <script type="text/javascript" src="http://www.ebi.ac.uk/inc/js/iconboxslider.js"></script>


                <div class="slidecontainer">
                    <div class="iconbox2heading">
                            <span class="headerToggle" id="news"><img class="headerToggleImage"
                                                                      src="http://www.ebi.ac.uk/inc/images/minus.gif"
                                                                      alt="Collapse"/></span>
                        Welcome
                    </div>
                    <div class="iconbox2contents" id="news_content" style="display: block">

                        <p>Welcome to the <strong>BioInvestigation Index (BII)</strong></p>

                        <p>If you are interested in using our infrastructure for your local use, or wish to collaborate with us, please
                            <a
                                    href="mailto:isatools@googlegroups.com?subject=Collaborate">contact us</a>.
                        </p>
                    </div>
                </div>

                <div class="slidecontainer">
                    <div class="iconbox2heading">
                            <span class="headerToggle" id="upcoming_developments"><img class="headerToggleImage"
                                                                                       src="http://www.ebi.ac.uk/inc/images/minus.gif"
                                                                                       alt="Collapse"/></span>
                        News...
                    </div>
                    <div class="iconbox2contents" id="upcoming_developments_content" style="display: block">
                        <p>Find out more about the <strong>ISA infrastructure</strong> through
                            visiting our <a href="http://isatab.sf.net">site!</a></p>
                    </div>
                </div>

                <!-- end left menu here -->

                <!-- InstanceEndEditable -->
                <!-- InstanceBeginEditable name="lefticons" -->

                <!-- InstanceEndEditable -->
                <script type="text/javascript" src="http://www.ebi.ac.uk/inc/js/sidebars.js"></script>
                <img src="http://www.ebi.ac.uk/inc/images/spacer.gif" class="spacer" alt="spacer"/></div>
        </td>
        <td class="contentsarea" id="contentsarea">
            <!-- InstanceBeginEditable name="contents" -->

            <!-- start contents here -->

            <table width="950" border="0" align="center" style="table-layout:fixed;">

                <tr>
                    <td colspan="3" width="72%">
                        <h:form>
                            <a4j:region renderRegionOnly="true">
                                <table border="0" style="table-layout:fixed">
                                    <tr>
                                        <td width="5%" rowspan="4" valign="top" style="overflow: hidden;">
                                            <img alt="" src="img/menu_css/search_im.png"/>
                                        </td>

                                        <td colspan="4" valign="bottom">
                                            <img alt="" src="img/searchImages/freetext.png"/><rich:spacer width="10"/>
                                            <h:inputText id="freetext" value="#{studyBeanProvider.searchPattern}"
                                                         styleClass="input_field_search"/>
                                        </td>
                                    </tr>

                                    <tr>

                                        <td width="20%"><img alt="" src="img/searchImages/organism.png"/>
                                        </td>
                                        <td width="25%"><img alt="" src="img/searchImages/endpoint.png"/>
                                        </td>

                                        <td width="25%"><img alt="" src="img/searchImages/techType.png"/>
                                        </td>
                                        <td width="25%"><img alt="" src="img/searchImages/platform.png"/>
                                        </td>

                                    </tr>

                                    <tr>

                                        <td width="25%">

                                            <h:selectOneMenu id="organism" value="#{studyBeanProvider.organism}"
                                                             styleClass="dropdown_selector" style="width:150px">
                                                <s:selectItems value="#{filterProvider.organisms }"
                                                               var="organism"
                                                               label="#{organism}"
                                                               noSelectionLabel="Filter on organisms"/>
                                                <!--<s:convertEntity/>-->
                                            </h:selectOneMenu>

                                        </td>

                                        <td width="25%">
                                            <h:selectOneMenu id="endpoint" value="#{studyBeanProvider.endPoint}"
                                                             styleClass="dropdown_selector" style="width:165px">
                                                <s:selectItems value="#{filterProvider.endPoints}"
                                                               var="endPoint"
                                                               label="#{endPoint}"
                                                               noSelectionLabel="Filter on measurement"/>
                                                <a4j:support event="onchange" reRender="technology"/>
                                                <!--<s:convertEntity/>-->
                                            </h:selectOneMenu>
                                        </td>


                                        <td width="25%">
                                            <h:selectOneMenu id="technology" value="#{studyBeanProvider.assayType}"
                                                             styleClass="dropdown_selector" style="width:150px">
                                                <s:selectItems
                                                        value="#{filterProvider.getAssayTechnologies(studyBeanProvider.endPoint)}"
                                                        var="assayType"
                                                        label="#{assayType}"
                                                        noSelectionLabel="Filter on technology"/>
                                                <!--<a4j:support event="onchange" reRender="endpoint"/>-->
                                                <!--<s:convertEntity/>-->
                                            </h:selectOneMenu>

                                        </td>


                                        <td width="28%">
                                            <h:selectOneMenu id="platform" value="#{studyBeanProvider.platform}"
                                                             styleClass="dropdown_selector" style="width:150px">
                                                <s:selectItems value="#{filterProvider.platforms}"
                                                               var="platform"
                                                               label="#{platform}"
                                                               noSelectionLabel="Filter on Platform"/>
                                                <!--<s:convertEntity/>-->
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td colspan="4" valign="top" align="right">
                                            <img alt="" src="img/searchImages/clear_fields.png" border="0"
                                                 usemap="#clear_fields_map"/>


                                            <h:commandButton value="Search"
                                                             action="/browse_studies.seam"
                                                             image="img/searchImages/search_index.png"
                                                             styleClass="search_button"/>
                                        </td>
                                    </tr>
                                </table>
                            </a4j:region>
                        </h:form>
                    </td>
                    <td width="28%">
                        <table width="100%" border="0">
                            <tr>
                                <td valign="bottom"><img alt="possible views" src="img/menu_css/views_im.png"/>
                                </td>
                                <td valign="top"><img alt="" src="img/menu_css/compoundInfo.png" border="0"
                                                      usemap="#view_map"/>
                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>
                <tr>
                    <td colspan="4" width="95%" align="center">
                        <br/>
                        <ui:insert name="body"/>
                        <br/>
                    </td>
                </tr>

            </table>

            <!-- end contents here -->
            <!-- InstanceEndEditable -->
            <img src="http://www.ebi.ac.uk/inc/images/spacer.gif" class="spacer" alt="spacer"/></td>
        <td class="rightmenucell" id="rightmenucell">
            <div class="rightmenu" id="rightmenu"><img src="http://www.ebi.ac.uk/inc/images/spacer.gif"
                                                       class="spacer" alt="spacer"/></div>
        </td>
    </tr>
</table>
<table class="footerpane" id="footerpane" summary="The main footer pane of the page">
    <tr>
        <td colspan="4" class="footerrow">
            <div class="footerdiv" id="footerdiv" style="z-index:2;">
                <iframe src="http://www.ebi.ac.uk/inc/foot.html" name="foot" frameborder="0" marginwidth="0px"
                        marginheight="0px" scrolling="no" height="22px" width="100%"
                        style="z-index:2;">Your browser does not support inline frames or is currently configured not to display inline frames. Content can be viewed at actual source page: http://www.ebi.ac.uk/inc/foot.html
                </iframe>
            </div>
        </td>
    </tr>
</table>
<script src="http://www.ebi.ac.uk/inc/js/footer.js" type="text/javascript"></script>
</div>

<map name="menu_map" id="menu_map">
    <area shape="rect" coords="3,1,150,47" href="home.seam" alt="about the index"/>
    <area shape="rect" coords="8,64,103,89" href="browse_studies.seam" alt="browse index"/>
    <area shape="rect" coords="6,94,101,119" href="submission_portal.seam" alt="submit to index"/>
    <area shape="rect" coords="7,122,101,145" href="mailto:isatools@googlegroups.com" alt="contact us"/>
    <area shape="rect" coords="7,149,102,174" href="credits.seam" alt="credits"/>
</map>

<map name="view_map" id="view_map">
    <area alt="view compound-centric information" shape="rect" coords="143,1,209,22" href="compound_view.seam"/>
</map>

<map name="clear_fields_map" id="clear_fields_map">
    <area alt="" shape="rect" coords="0,0,88,20" href="browse_studies.seam"/>
</map>
</body>
</html>